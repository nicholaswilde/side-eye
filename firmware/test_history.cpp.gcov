        -:    0:Source:test/test_history.cpp
        -:    0:Graph:/home/nicholas/git/nicholaswilde/side-eye/firmware/.pio/build/native/test/test_history.gcno
        -:    0:Data:/home/nicholas/git/nicholaswilde/side-eye/firmware/.pio/build/native/test/test_history.gcda
        -:    0:Runs:2
        -:    1:#include <unity.h>
        -:    2:#include "HistoryBuffer.h"
        -:    3:
        4:    4:void setUp(void) {
        -:    5:    // set stuff up here
        4:    6:}
        -:    7:
        4:    8:void tearDown(void) {
        -:    9:    // clean stuff up here
        4:   10:}
        -:   11:
        2:   12:void test_push_and_get(void) {
        2:   13:    HistoryBuffer<int, 5> buffer;
        2:   14:    TEST_ASSERT_EQUAL(0, buffer.count());
        -:   15:
        2:   16:    buffer.push(10);
        2:   17:    TEST_ASSERT_EQUAL(1, buffer.count());
        2:   18:    TEST_ASSERT_EQUAL(10, buffer.get(0));
        -:   19:
        2:   20:    buffer.push(20);
        2:   21:    buffer.push(30);
        2:   22:    buffer.push(40);
        2:   23:    buffer.push(50);
        2:   24:    TEST_ASSERT_EQUAL(5, buffer.count());
        2:   25:    TEST_ASSERT_EQUAL(10, buffer.get(0));
        2:   26:    TEST_ASSERT_EQUAL(50, buffer.get(4));
        -:   27:
        -:   28:    // Test wrap around
        2:   29:    buffer.push(60);
        2:   30:    TEST_ASSERT_EQUAL(5, buffer.count());
        2:   31:    TEST_ASSERT_EQUAL(20, buffer.get(0));
        2:   32:    TEST_ASSERT_EQUAL(60, buffer.get(4));
        2:   33:}
        -:   34:
        2:   35:void test_max(void) {
        2:   36:    HistoryBuffer<int, 5> buffer;
        2:   37:    buffer.push(10);
        2:   38:    buffer.push(50);
        2:   39:    buffer.push(20);
        2:   40:    TEST_ASSERT_EQUAL(50, buffer.max());
        -:   41:
        2:   42:    buffer.push(100);
        2:   43:    TEST_ASSERT_EQUAL(100, buffer.max());
        -:   44:
        2:   45:    buffer.push(5);
        2:   46:    buffer.push(5); // 10 should drop out
        2:   47:    TEST_ASSERT_EQUAL(100, buffer.max());
        2:   48:}
        -:   49:
        2:   50:int main(int argc, char **argv) {
        2:   51:    UNITY_BEGIN();
        2:   52:    RUN_TEST(test_push_and_get);
        2:   53:    RUN_TEST(test_max);
        2:   54:    return UNITY_END();
        -:   55:}
