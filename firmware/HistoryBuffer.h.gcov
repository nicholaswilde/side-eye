        -:    0:Source:include/HistoryBuffer.h
        -:    0:Graph:/home/nicholas/git/nicholaswilde/side-eye/firmware/.pio/build/native/test/test_history.gcno
        -:    0:Data:/home/nicholas/git/nicholaswilde/side-eye/firmware/.pio/build/native/test/test_history.gcda
        -:    0:Runs:2
        -:    1:#ifndef HISTORY_BUFFER_H
        -:    2:#define HISTORY_BUFFER_H
        -:    3:
        -:    4:#include <stddef.h>
        -:    5:
        -:    6:template <typename T, size_t Size>
        -:    7:class HistoryBuffer {
        -:    8:public:
        4:    9:    HistoryBuffer() : _head(0), _count(0) {}
        -:   10:
       24:   11:    void push(T value) {
       24:   12:        _buffer[_head] = value;
       24:   13:        _head = (_head + 1) % Size;
       24:   14:        if (_count < Size) {
       20:   15:            _count++;
        -:   16:        }
       24:   17:    }
        -:   18:
       10:   19:    T get(size_t index) const {
      10*:   20:        if (index >= _count) return T();
       10:   21:        size_t pos = (_head + Size - _count + index) % Size;
       10:   22:        return _buffer[pos];
        -:   23:    }
        -:   24:
        8:   25:    size_t count() const {
        8:   26:        return _count;
        -:   27:    }
        -:   28:
        -:   29:    size_t size() const {
        -:   30:        return Size;
        -:   31:    }
        -:   32:
        6:   33:    T max() const {
       6*:   34:        if (_count == 0) return T();
        6:   35:        T m = _buffer[0];
       24:   36:        for (size_t i = 1; i < _count; i++) {
       18:   37:            if (_buffer[i] > m) m = _buffer[i];
        -:   38:        }
        6:   39:        return m;
        -:   40:    }
        -:   41:
        -:   42:private:
        -:   43:    T _buffer[Size];
        -:   44:    size_t _head;
        -:   45:    size_t _count;
        -:   46:};
        -:   47:
        -:   48:#endif
